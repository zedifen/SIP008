<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="SIP008 Subscription Service. Powered by Cloudflare.">
  <link rel="icon" type="image/png" href="https://workers.cloudflare.com/favicon.ico" sizes="48x48">
  <title>Convert V2RayN Sub to SIP008</title>
  <style>
body {
  padding: 10px;
}
input + span {
  padding-right: 30px;
}
input:invalid + span::after {
  position: absolute;
  content: "✖";
  color: red;
  padding-left: 5px;
}
input:valid + span::after {
  position: absolute;
  content: "✓";
  color: green;
  padding-left: 5px;
}
.info {
  background-color: lightblue;
  border-radius: 5px;
  padding: 10px;
}
  </style>
</head>
<body>
  <h1>Convert V2RayN Sub to SIP008</h1>
<div class="info">
  <p>Powered by <strong>Cloudflare Workers</strong>.</p>
  <p>This service will not store the data you provided. This page is served as-is, while the script source can be checked at: <a href="./src.js">src.js</a>.</p>
  <p>For safety you may want to host this yourself, then please follow the instructions in <a href="./src.js">the script</a>.</p>
</div>
  <p>Input your subscription link: </p>
  <div><input 
    id="v2rayn-link"
    name="v2rayn-link"
    type="url"
    pattern="https://.*"
    title="Paste V2RayN subscription link here ..."
    placeholder="https://example.com/link/1234567abcdef"
    spellcheck="false"
    required
    size="72"
  /><span class="validity"></span></div>
  <br/>
  <p>Get converted subscription at: <a id="converted"></a></p>
  <script>
    const origin = (window.location.origin + '/') || 'https://example.org/';
    const userInput = document.getElementById('v2rayn-link');
    const outputLink = document.getElementById('converted');
    userInput.addEventListener('input', () => {
      converted = origin + 'sip008/sub.json?link=' + encodeURIComponent(userInput.value);
      outputLink.setAttribute('href', converted);
      outputLink.innerHTML = converted;
    });
  </script>
</body>
</html>